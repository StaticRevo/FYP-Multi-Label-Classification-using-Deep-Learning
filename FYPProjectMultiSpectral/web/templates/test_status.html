{% extends "base.html" %}
{% block title %}Testing Status{% endblock %}
{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8"> 
      <h1 class="mb-4 section-title">Testing Status</h1>
      <p>{{ message }}</p>
      <p><em>Please remain on this page to monitor the testing progress.</em></p>

      <div id="log-output" class="card p-3" style="height: 300px; overflow-y: scroll;">
        Loading testing logs...
      </div>

      <a href="{{ url_for('index') }}" class="btn btn-secondary mt-3">Return to Home</a>
    </div>
  </div>
</div>

<script>
  function fetchLogs() {
    fetch("/logs_test")
      .then(response => response.text())
      .then(data => {
        document.getElementById("log-output").innerText = data;
      })
      .catch(error => {
        console.error("Error fetching logs:", error);
        document.getElementById("log-output").innerText = "Error loading logs.";
      });
  }
  setInterval(fetchLogs, 5000);  // Poll every 5 seconds
  fetchLogs();
</script>
{% endblock %}